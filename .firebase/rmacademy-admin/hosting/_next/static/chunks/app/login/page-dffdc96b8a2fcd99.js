(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{550:(e,t,r)=>{"use strict";r.d(t,{db:()=>n,j:()=>c});var a=r(2078),s=r(9708),l=r(2553);let i=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyC5SUu7e-aNUfgBEeEoXEwjONknWKhbtBI",authDomain:"rmcheck-4e79c.firebaseapp.com",projectId:"rmcheck-4e79c",storageBucket:"rmcheck-4e79c.firebasestorage.app",messagingSenderId:"1081522017302",appId:"1:1081522017302:web:b7bd3e0436a05c92c29137"}),n=(0,s.aU)(i),c=(0,l.xI)(i)},865:(e,t,r)=>{Promise.resolve().then(r.bind(r,5404))},3136:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5155);function s(){return(0,a.jsx)("div",{className:"flex justify-center items-center p-4",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-[var(--primary)] rounded-full animate-spin"})})}},5404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),s=r(2115),l=r(63),i=r(2553),n=r(550),c=r(9730),d=r(7344),o=r(5239);function u(){let{user:e,loading:t}=(0,c.A)(),r=(0,l.useRouter)();(0,s.useEffect)(()=>{!t&&e&&r.push("/dashboard")},[e,t,r]);let u=async()=>{let e=new i.HF;try{await (0,i.df)(n.j,e)}catch(e){console.error("Google Sign-In Error",e),alert("로그인 중 오류가 발생했습니다.")}};return t||e?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:(0,a.jsxs)("div",{className:"text-center p-10 bg-white rounded-2xl shadow-xl max-w-sm w-full",children:[(0,a.jsx)(o.default,{src:"/rmlogo.png",alt:"RuleMakers Logo",width:100,height:100,className:"mx-auto mb-8",priority:!0}),(0,a.jsx)("h1",{className:"text-2xl font-bold font-lexend text-slate-800",children:"관리자 시스템 로그인"}),(0,a.jsx)("p",{className:"text-slate-600 mb-8 mt-2",children:"등록된 관리자 계정으로 로그인해주세요."}),(0,a.jsxs)("button",{onClick:u,className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg shadow-sm flex items-center justify-center text-base font-medium text-slate-700 hover:bg-slate-50 transition-colors",children:[(0,a.jsx)(d.F4b,{className:"mr-3 text-2xl"}),"Google 계정으로 로그인"]})]})})}},9730:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>o});var a=r(5155),s=r(2115),l=r(2553),i=r(550),n=r(9708),c=r(3136);let d=(0,s.createContext)({user:null,loading:!0}),o=e=>{let{children:t}=e,[r,o]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{let e=(0,l.hg)(i.j,async e=>{if(e){let r={...e};try{var t;if(null==(t=e.email)?void 0:t.endsWith("@rulemakers.co.kr"))r.role="superadmin";else{let t=(0,n.rJ)(i.db,"academies"),a=(0,n.P)(t,(0,n._M)("adminEmail","==",e.email),(0,n._M)("isDeleted","==",!1)),s=await (0,n.GG)(a);if(s.empty)await i.j.signOut(),r=null;else{let e=s.docs[0];r&&(r.role="academyadmin",r.academyId=e.id,r.academyName=e.data().name)}}}catch(e){console.error("Failed to fetch user role, signing out.",e),await i.j.signOut(),r=null}o(r)}else o(null);m(!1)});return()=>e()},[]),u)?(0,a.jsx)(c.A,{}):(0,a.jsx)(d.Provider,{value:{user:r,loading:u},children:t})},u=()=>(0,s.useContext)(d)}},e=>{e.O(0,[135,965,753,240,7,441,255,358],()=>e(e.s=865)),_N_E=e.O()}]);